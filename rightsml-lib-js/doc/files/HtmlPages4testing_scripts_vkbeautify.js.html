<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>HtmlPages4testing\scripts\vkbeautify.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Action.html">Action</a></li>
            
                <li><a href="../classes/Asset.html">Asset</a></li>
            
                <li><a href="../classes/Constraint.html">Constraint</a></li>
            
                <li><a href="../classes/Duty.html">Duty</a></li>
            
                <li><a href="../classes/Party.html">Party</a></li>
            
                <li><a href="../classes/Permission.html">Permission</a></li>
            
                <li><a href="../classes/Policy.html">Policy</a></li>
            
                <li><a href="../classes/Prohibition.html">Prohibition</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/: ODRL.html">: ODRL</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: HtmlPages4testing\scripts\vkbeautify.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
* vkBeautify - javascript plugin to pretty-print or minify text in XML, JSON, CSS and SQL formats.
*  
* Version - 0.99.00.beta 
* Copyright (c) 2012 Vadim Kiryukhin
* vkiryukhin @ gmail.com
* http://www.eslinstructor.net/vkbeautify/
* 
* Dual licensed under the MIT and GPL licenses:
*   http://www.opensource.org/licenses/mit-license.php
*   http://www.gnu.org/licenses/gpl.html
*
*   Pretty print
*
*        vkbeautify.xml(text [,indent_pattern]);
*        vkbeautify.json(text [,indent_pattern]);
*        vkbeautify.css(text [,indent_pattern]);
*        vkbeautify.sql(text [,indent_pattern]);
*
*        @text - String; text to beatufy;
*        @indent_pattern - Integer | String;
*                Integer:  number of white spaces;
*                String:   character string to visualize indentation ( can also be a set of white spaces )
*   Minify
*
*        vkbeautify.xmlmin(text [,preserve_comments]);
*        vkbeautify.jsonmin(text);
*        vkbeautify.cssmin(text [,preserve_comments]);
*        vkbeautify.sqlmin(text);
*
*        @text - String; text to minify;
*        @preserve_comments - Bool; [optional];
*                Set this flag to true to prevent removing comments from @text ( minxml and mincss functions only. )
*
*   Examples:
*        vkbeautify.xml(text); // pretty print XML
*        vkbeautify.json(text, 4 ); // pretty print JSON
*        vkbeautify.css(text, &#x27;. . . .&#x27;); // pretty print CSS
*        vkbeautify.sql(text, &#x27;----&#x27;); // pretty print SQL
*
*        vkbeautify.xmlmin(text, true);// minify XML, preserve comments
*        vkbeautify.jsonmin(text);// minify JSON
*        vkbeautify.cssmin(text);// minify CSS, remove comments ( default )
*        vkbeautify.sqlmin(text);// minify SQL
*
*/

(function() {

function createShiftArr(step) {

	var space = &#x27;    &#x27;;
	
	if ( isNaN(parseInt(step)) ) {  // argument is string
		space = step;
	} else { // argument is integer
		switch(step) {
			case 1: space = &#x27; &#x27;; break;
			case 2: space = &#x27;  &#x27;; break;
			case 3: space = &#x27;   &#x27;; break;
			case 4: space = &#x27;    &#x27;; break;
			case 5: space = &#x27;     &#x27;; break;
			case 6: space = &#x27;      &#x27;; break;
			case 7: space = &#x27;       &#x27;; break;
			case 8: space = &#x27;        &#x27;; break;
			case 9: space = &#x27;         &#x27;; break;
			case 10: space = &#x27;          &#x27;; break;
			case 11: space = &#x27;           &#x27;; break;
			case 12: space = &#x27;            &#x27;; break;
		}
	}

	var shift = [&#x27;\n&#x27;]; // array of shifts
	for(ix=0;ix&lt;100;ix++){
		shift.push(shift[ix]+space); 
	}
	return shift;
}

function vkbeautify(){
	this.step = &#x27;    &#x27;; // 4 spaces
	this.shift = createShiftArr(this.step);
};

vkbeautify.prototype.xml = function(text,step) {

	var ar = text.replace(/&gt;\s{0,}&lt;/g,&quot;&gt;&lt;&quot;)
				 .replace(/&lt;/g,&quot;~::~&lt;&quot;)
				 .replace(/\s*xmlns\:/g,&quot;~::~xmlns:&quot;)
				 .replace(/\s*xmlns\=/g,&quot;~::~xmlns=&quot;)
				 .split(&#x27;~::~&#x27;),
		len = ar.length,
		inComment = false,
		deep = 0,
		str = &#x27;&#x27;,
		ix = 0,
		shift = step ? createShiftArr(step) : this.shift;

		for(ix=0;ix&lt;len;ix++) {
			// start comment or &lt;![CDATA[...]]&gt; or &lt;!DOCTYPE //
			if(ar[ix].search(/&lt;!/) &gt; -1) { 
				str += shift[deep]+ar[ix];
				inComment = true; 
				// end comment  or &lt;![CDATA[...]]&gt; //
				if(ar[ix].search(/--&gt;/) &gt; -1 || ar[ix].search(/\]&gt;/) &gt; -1 || ar[ix].search(/!DOCTYPE/) &gt; -1 ) { 
					inComment = false; 
				}
			} else 
			// end comment  or &lt;![CDATA[...]]&gt; //
			if(ar[ix].search(/--&gt;/) &gt; -1 || ar[ix].search(/\]&gt;/) &gt; -1) { 
				str += ar[ix];
				inComment = false; 
			} else 
			// &lt;elm&gt;&lt;/elm&gt; //
			if( /^&lt;\w/.exec(ar[ix-1]) &amp;&amp; /^&lt;\/\w/.exec(ar[ix]) &amp;&amp;
				/^&lt;[\w:\-\.\,]+/.exec(ar[ix-1]) == /^&lt;\/[\w:\-\.\,]+/.exec(ar[ix])[0].replace(&#x27;/&#x27;,&#x27;&#x27;)) { 
				str += ar[ix];
				if(!inComment) deep--;
			} else
			 // &lt;elm&gt; //
			if(ar[ix].search(/&lt;\w/) &gt; -1 &amp;&amp; ar[ix].search(/&lt;\//) == -1 &amp;&amp; ar[ix].search(/\/&gt;/) == -1 ) {
				str = !inComment ? str += shift[deep++]+ar[ix] : str += ar[ix];
			} else 
			 // &lt;elm&gt;...&lt;/elm&gt; //
			if(ar[ix].search(/&lt;\w/) &gt; -1 &amp;&amp; ar[ix].search(/&lt;\//) &gt; -1) {
				str = !inComment ? str += shift[deep]+ar[ix] : str += ar[ix];
			} else 
			// &lt;/elm&gt; //
			if(ar[ix].search(/&lt;\//) &gt; -1) { 
				str = !inComment ? str += shift[--deep]+ar[ix] : str += ar[ix];
			} else 
			// &lt;elm/&gt; //
			if(ar[ix].search(/\/&gt;/) &gt; -1 ) { 
				str = !inComment ? str += shift[deep]+ar[ix] : str += ar[ix];
			} else 
			// &lt;? xml ... ?&gt; //
			if(ar[ix].search(/&lt;\?/) &gt; -1) { 
				str += shift[deep]+ar[ix];
			} else 
			// xmlns //
			if( ar[ix].search(/xmlns\:/) &gt; -1  || ar[ix].search(/xmlns\=/) &gt; -1) { 
				str += shift[deep]+ar[ix];
			} 
			
			else {
				str += ar[ix];
			}
		}
		
	return  (str[0] == &#x27;\n&#x27;) ? str.slice(1) : str;
}

vkbeautify.prototype.json = function(text,step) {

	var step = step ? step : this.step;
	
	if (typeof JSON === &#x27;undefined&#x27; ) return text; 
	
	if ( typeof text === &quot;string&quot; ) return JSON.stringify(JSON.parse(text), null, step);
	if ( typeof text === &quot;object&quot; ) return JSON.stringify(text, null, step);
		
	return text; // text is not string nor object
}

vkbeautify.prototype.css = function(text, step) {

	var ar = text.replace(/\s{1,}/g,&#x27; &#x27;)
				.replace(/\{/g,&quot;{~::~&quot;)
				.replace(/\}/g,&quot;~::~}~::~&quot;)
				.replace(/\;/g,&quot;;~::~&quot;)
				.replace(/\/\*/g,&quot;~::~/*&quot;)
				.replace(/\*\//g,&quot;*/~::~&quot;)
				.replace(/~::~\s{0,}~::~/g,&quot;~::~&quot;)
				.split(&#x27;~::~&#x27;),
		len = ar.length,
		deep = 0,
		str = &#x27;&#x27;,
		ix = 0,
		shift = step ? createShiftArr(step) : this.shift;
		
		for(ix=0;ix&lt;len;ix++) {

			if( /\{/.exec(ar[ix]))  { 
				str += shift[deep++]+ar[ix];
			} else 
			if( /\}/.exec(ar[ix]))  { 
				str += shift[--deep]+ar[ix];
			} else
			if( /\*\\/.exec(ar[ix]))  { 
				str += shift[deep]+ar[ix];
			}
			else {
				str += shift[deep]+ar[ix];
			}
		}
		return str.replace(/^\n{1,}/,&#x27;&#x27;);
}

//----------------------------------------------------------------------------

function isSubquery(str, parenthesisLevel) {
	return  parenthesisLevel - (str.replace(/\(/g,&#x27;&#x27;).length - str.replace(/\)/g,&#x27;&#x27;).length )
}

function split_sql(str, tab) {

	return str.replace(/\s{1,}/g,&quot; &quot;)

				.replace(/ AND /ig,&quot;~::~&quot;+tab+tab+&quot;AND &quot;)
				.replace(/ BETWEEN /ig,&quot;~::~&quot;+tab+&quot;BETWEEN &quot;)
				.replace(/ CASE /ig,&quot;~::~&quot;+tab+&quot;CASE &quot;)
				.replace(/ ELSE /ig,&quot;~::~&quot;+tab+&quot;ELSE &quot;)
				.replace(/ END /ig,&quot;~::~&quot;+tab+&quot;END &quot;)
				.replace(/ FROM /ig,&quot;~::~FROM &quot;)
				.replace(/ GROUP\s{1,}BY/ig,&quot;~::~GROUP BY &quot;)
				.replace(/ HAVING /ig,&quot;~::~HAVING &quot;)
				//.replace(/ SET /ig,&quot; SET~::~&quot;)
				.replace(/ IN /ig,&quot; IN &quot;)
				
				.replace(/ JOIN /ig,&quot;~::~JOIN &quot;)
				.replace(/ CROSS~::~{1,}JOIN /ig,&quot;~::~CROSS JOIN &quot;)
				.replace(/ INNER~::~{1,}JOIN /ig,&quot;~::~INNER JOIN &quot;)
				.replace(/ LEFT~::~{1,}JOIN /ig,&quot;~::~LEFT JOIN &quot;)
				.replace(/ RIGHT~::~{1,}JOIN /ig,&quot;~::~RIGHT JOIN &quot;)
				
				.replace(/ ON /ig,&quot;~::~&quot;+tab+&quot;ON &quot;)
				.replace(/ OR /ig,&quot;~::~&quot;+tab+tab+&quot;OR &quot;)
				.replace(/ ORDER\s{1,}BY/ig,&quot;~::~ORDER BY &quot;)
				.replace(/ OVER /ig,&quot;~::~&quot;+tab+&quot;OVER &quot;)

				.replace(/\(\s{0,}SELECT /ig,&quot;~::~(SELECT &quot;)
				.replace(/\)\s{0,}SELECT /ig,&quot;)~::~SELECT &quot;)
				
				.replace(/ THEN /ig,&quot; THEN~::~&quot;+tab+&quot;&quot;)
				.replace(/ UNION /ig,&quot;~::~UNION~::~&quot;)
				.replace(/ USING /ig,&quot;~::~USING &quot;)
				.replace(/ WHEN /ig,&quot;~::~&quot;+tab+&quot;WHEN &quot;)
				.replace(/ WHERE /ig,&quot;~::~WHERE &quot;)
				.replace(/ WITH /ig,&quot;~::~WITH &quot;)
				
				//.replace(/\,\s{0,}\(/ig,&quot;,~::~( &quot;)
				//.replace(/\,/ig,&quot;,~::~&quot;+tab+tab+&quot;&quot;)

				.replace(/ ALL /ig,&quot; ALL &quot;)
				.replace(/ AS /ig,&quot; AS &quot;)
				.replace(/ ASC /ig,&quot; ASC &quot;)	
				.replace(/ DESC /ig,&quot; DESC &quot;)	
				.replace(/ DISTINCT /ig,&quot; DISTINCT &quot;)
				.replace(/ EXISTS /ig,&quot; EXISTS &quot;)
				.replace(/ NOT /ig,&quot; NOT &quot;)
				.replace(/ NULL /ig,&quot; NULL &quot;)
				.replace(/ LIKE /ig,&quot; LIKE &quot;)
				.replace(/\s{0,}SELECT /ig,&quot;SELECT &quot;)
				.replace(/\s{0,}UPDATE /ig,&quot;UPDATE &quot;)
				.replace(/ SET /ig,&quot; SET &quot;)
							
				.replace(/~::~{1,}/g,&quot;~::~&quot;)
				.split(&#x27;~::~&#x27;);
}

vkbeautify.prototype.sql = function(text,step) {

	var ar_by_quote = text.replace(/\s{1,}/g,&quot; &quot;)
							.replace(/\&#x27;/ig,&quot;~::~\&#x27;&quot;)
							.split(&#x27;~::~&#x27;),
		len = ar_by_quote.length,
		ar = [],
		deep = 0,
		tab = this.step,//+this.step,
		inComment = true,
		inQuote = false,
		parenthesisLevel = 0,
		str = &#x27;&#x27;,
		ix = 0,
		shift = step ? createShiftArr(step) : this.shift;;

		for(ix=0;ix&lt;len;ix++) {
			if(ix%2) {
				ar = ar.concat(ar_by_quote[ix]);
			} else {
				ar = ar.concat(split_sql(ar_by_quote[ix], tab) );
			}
		}
		
		len = ar.length;
		for(ix=0;ix&lt;len;ix++) {
			
			parenthesisLevel = isSubquery(ar[ix], parenthesisLevel);
			
			if( /\s{0,}\s{0,}SELECT\s{0,}/.exec(ar[ix]))  { 
				ar[ix] = ar[ix].replace(/\,/g,&quot;,\n&quot;+tab+tab+&quot;&quot;)
			} 
			
			if( /\s{0,}\s{0,}SET\s{0,}/.exec(ar[ix]))  { 
				ar[ix] = ar[ix].replace(/\,/g,&quot;,\n&quot;+tab+tab+&quot;&quot;)
			} 
			
			if( /\s{0,}\(\s{0,}SELECT\s{0,}/.exec(ar[ix]))  { 
				deep++;
				str += shift[deep]+ar[ix];
			} else 
			if( /\&#x27;/.exec(ar[ix]) )  { 
				if(parenthesisLevel&lt;1 &amp;&amp; deep) {
					deep--;
				}
				str += ar[ix];
			}
			else  { 
				str += shift[deep]+ar[ix];
				if(parenthesisLevel&lt;1 &amp;&amp; deep) {
					deep--;
				}
			} 
			var junk = 0;
		}

		str = str.replace(/^\n{1,}/,&#x27;&#x27;).replace(/\n{1,}/g,&quot;\n&quot;);
		return str;
}


vkbeautify.prototype.xmlmin = function(text, preserveComments) {

	var str = preserveComments ? text
							   : text.replace(/\&lt;![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\&gt;/g,&quot;&quot;)
									 .replace(/[ \r\n\t]{1,}xmlns/g, &#x27; xmlns&#x27;);
	return  str.replace(/&gt;\s{0,}&lt;/g,&quot;&gt;&lt;&quot;); 
}

vkbeautify.prototype.jsonmin = function(text) {

	if (typeof JSON === &#x27;undefined&#x27; ) return text; 
	
	return JSON.stringify(JSON.parse(text), null, 0); 
				
}

vkbeautify.prototype.cssmin = function(text, preserveComments) {
	
	var str = preserveComments ? text
							   : text.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,&quot;&quot;) ;

	return str.replace(/\s{1,}/g,&#x27; &#x27;)
			  .replace(/\{\s{1,}/g,&quot;{&quot;)
			  .replace(/\}\s{1,}/g,&quot;}&quot;)
			  .replace(/\;\s{1,}/g,&quot;;&quot;)
			  .replace(/\/\*\s{1,}/g,&quot;/*&quot;)
			  .replace(/\*\/\s{1,}/g,&quot;*/&quot;);
}

vkbeautify.prototype.sqlmin = function(text) {
	return text.replace(/\s{1,}/g,&quot; &quot;).replace(/\s{1,}\(/,&quot;(&quot;).replace(/\s{1,}\)/,&quot;)&quot;);
}

window.vkbeautify = new vkbeautify();

})();


    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
